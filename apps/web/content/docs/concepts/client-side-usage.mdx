---
title: 'Client-Side Usage'
description: 'Learn how to use PayKit in React applications.'
date: '2025-10-30'
published: true
toc: true
---

PayKit provides React hooks for seamless client-side integration. The React SDK is a client for the PayKit API that handles the `[data, error]` pattern automatically and provides loading states.

## Basic Setup

Wrap your app with the PayKit provider:

<br />

```typescript
// app/layout.tsx
import * as React from "react"
import { PaykitProvider } from '@paykit-sdk/react';

export default function Layout({ children }: React.PropsWithChildren) {
  return (
    <PaykitProvider apiUrl="/api/paykit" headers={{ xApiKey: "12345"}}>
      {children}
    </PaykitProvider>
  );
}
```

## Customer

### Creating a Customer

<br />

```typescript
// components/customer-form.tsx
import { useCustomer } from '@paykit-sdk/react';

export function CustomerForm() {
  const { create } = useCustomer();

  const handleSubmit = async (formData: FormData) => {
    const [customer, error] = await create.run({
      email: formData.get('email') as string,
      name: formData.get('name') as string,
    });

    if (error) {
      console.error('Failed to create customer:', error.message);
      return;
    }

    console.log('Customer created:', customer.id);
  };

  return (
    <form onSubmit={handleSubmit}>
      <input name="email" type="email" placeholder="Email" required />
      <input name="name" type="text" placeholder="Name" />
      <button type="submit" disabled={create.loading}>
        {create.loading ? 'Creating...' : 'Create Customer'}
      </button>
    </form>
  );
}
```

### Retrieving a Customer

<br />

```typescript
// components/customer-details.tsx
import { useCustomer } from '@paykit-sdk/react';

export function CustomerDetails({ customerId }: { customerId: string }) {
  const { retrieve } = useCustomer();

  const handleRetrieve = async () => {
    const [customer, error] = await retrieve.run(customerId);

    if (error) {
      console.error('Failed to retrieve customer:', error.message);
      return;
    }

    console.log('Customer:', customer);
  };

  return (
    <button onClick={handleRetrieve} disabled={retrieve.loading}>
      {retrieve.loading ? 'Loading...' : 'Get Customer Details'}
    </button>
  );
}
```

### Updating a Customer

<br />

```typescript
// components/customer-update.tsx
import { useCustomer } from '@paykit-sdk/react';

export function CustomerUpdate({ customerId }: { customerId: string }) {
  const { update } = useCustomer();

  const handleUpdate = async (formData: FormData) => {
    const [customer, error] = await update.run(customerId, {
      name: formData.get('name') as string,
      email: formData.get('email') as string,
    });

    if (error) {
      console.error('Failed to update customer:', error.message);
      return;
    }

    console.log('Customer updated:', customer.id);
  };

  return (
    <form onSubmit={handleUpdate}>
      <input name="name" type="text" placeholder="New Name" />
      <input name="email" type="email" placeholder="New Email" />
      <button type="submit" disabled={update.loading}>
        {update.loading ? 'Updating...' : 'Update Customer'}
      </button>
    </form>
  );
}
```

## Checkout

### Creating a Checkout

<br />

```typescript
// components/checkout-button.tsx
import { useCheckout } from '@paykit-sdk/react';

export function CheckoutButton() {
  const { create } = useCheckout();

  const handleCheckout = async () => {
    const [checkout, error] = await create.run({
      customer_id: 'cus_123', // or { email: 'odii@gmail.com' }
      item_id: 'price_123',
      quantity: 1,
      session_type: 'one_time',
      metadata: { source: 'web_app' },
      provider_metadata: {},
      cancel_url: 'http://localhost:3000/dashboard',
      success_url: 'http://localhost:3000/success'
    });

    if (error) {
      console.error('Failed to create checkout:', error.message);
      return;
    }

    window.location.href = checkout.payment_url;
  };

  return (
    <button onClick={handleCheckout} disabled={create.loading}>
      {create.loading ? 'Creating checkout...' : 'Pay Now'}
    </button>
  );
}
```

### Retrieving a Checkout

<br />

```typescript
//components/checkout-status.tsx
import { useCheckout } from '@paykit-sdk/react';

export function CheckoutStatus({ checkoutId }: { checkoutId: string }) {
  const { retrieve } = useCheckout();

  const handleRetrieve = async () => {
    const [checkout, error] = await retrieve.run(checkoutId);

    if (error) {
      console.error('Failed to retrieve checkout:', error.message);
      return;
    }

    console.log('Checkout:', checkout);
  };

  return (
    <button onClick={handleRetrieve} disabled={retrieve.loading}>
      {retrieve.loading ? 'Loading...' : 'Get Checkout Status'}
    </button>
  );
}
```

## Subscription

### Creating a Subscription

<br />

```typescript
// components/subscription-form.tsx
import { useSubscription } from '@paykit-sdk/react';

export function SubscriptionForm() {
  const { create } = useSubscription();

  const handleSubscribe = async () => {
    const [subscription, error] = await create.run({
      customer_id: 'cus_123',
      item_id: 'price_123',
      metadata: { plan: 'pro' },
    });

    if (error) {
      console.error('Failed to create subscription:', error.message);
      return;
    }

    console.log('Subscription created:', subscription.id);
  };

  return (
    <button onClick={handleSubscribe} disabled={create.loading}>
      {create.loading ? 'Creating subscription...' : 'Subscribe'}
    </button>
  );
}
```

### Retrieving a Subscription

<br />

```typescript
// components/subscription-details.tsx
import { useSubscription } from '@paykit-sdk/react';

export function SubscriptionDetails({ subscriptionId }: { subscriptionId: string }) {
  const { retrieve } = useSubscription();

  const handleRetrieve = async () => {
    const [subscription, error] = await retrieve.run(subscriptionId);

    if (error) {
      console.error('Failed to retrieve subscription:', error.message);
      return;
    }

    console.log('Subscription:', subscription);
  };

  return (
    <button onClick={handleRetrieve} disabled={retrieve.loading}>
      {retrieve.loading ? 'Loading...' : 'Get Subscription Details'}
    </button>
  );
}
```

### Updating a Subscription

<br />

```typescript
// components/subscription-update.tsx
import { useSubscription } from '@paykit-sdk/react';

export function SubscriptionUpdate({ subscriptionId }: { subscriptionId: string }) {
  const { update } = useSubscription();

  const handleUpdate = async () => {
    const [subscription, error] = await update.run(subscriptionId, {
      metadata: { plan: 'enterprise' },
    });

    if (error) {
      console.error('Failed to update subscription:', error.message);
      return;
    }

    console.log('Subscription updated:', subscription.id);
  };

  return (
    <button onClick={handleUpdate} disabled={update.loading}>
      {update.loading ? 'Updating...' : 'Update Subscription'}
    </button>
  );
}
```

### Canceling a Subscription

<br />

```typescript
// components/subscription-cancel.tsx

import {useSubscription} from '@paykit-sdk/react';

export function SubscriptionCancel({ subscriptionId }: { subscriptionId: string }) {
  const { cancel } = useSubscription();

  const handleCancel = async () => {
    const [subscription, error] = await cancel.run(subscriptionId);

    if (error) {
      console.error('Failed to cancel subscription:', error.message);
      return;
    }

    console.log('Subscription cancelled:', subscription.status);

};

return (
  <button onClick={handleCancel} disabled={cancel.loading}>
    {cancel.loading ? 'Cancelling...' : 'Cancel Subscription'}
  </button>
 );
}

```

## Hook Methods

All PayKit hooks provide consistent methods with `.run` and `.loading` to perform the action and give a loading state

<br />

```typescript
const { create, retrieve, update, cancel } = useResource();
```

- `create` - Function to create a resource
- `retrieve` - Function to retrieve resource
- `update` - Function to update resource
- `cancel` - Function to cancel resource (subscription only)
