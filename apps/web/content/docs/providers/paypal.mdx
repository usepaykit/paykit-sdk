---
title: 'PayPal'
description: 'Integrate PayPal payments with PayKit.'
date: '2025-10-30'
published: true
toc: true
---

PayKit provides a unified PayPal integration that follows the same API as other providers.

## Quick Start

Install the PayPal provider:

<br />

```bash
# terminal
npm install @paykit-sdk/paypal
```

## Setup

Create a provider entry that exports a PayKit instance and generated endpoints.

<br />

```typescript
// lib/paykit.ts
import { PayKit, createEndpointHandlers } from '@paykit-sdk/core';
import { paypal } from '@paykit-sdk/paypal';

export const paykit = new PayKit(paypal());
export const endpoints = createEndpointHandlers(paykit);
```

Alternatively, configure directly:

<br />

```typescript
// lib/paykit.ts
import { PayKit, createEndpointHandlers } from '@paykit-sdk/core';
import { createPayPal } from '@paykit-sdk/paypal';

export const paykit = new PayKit(
  createPayPal({
    clientId: process.env.PAYPAL_CLIENT_ID!,
    clientSecret: process.env.PAYPAL_CLIENT_SECRET!,
    isSandbox: process.env.PAYPAL_SANDBOX === 'true',
  }),
);

export const endpoints = createEndpointHandlers(paykit);
```

## Basic Usage

<br />

Next.js catchâ€‘all route. This forwards calls to the generated handlers.

<br />

```typescript
// app/api/paykit/[...endpoint]/route.ts
import { endpoints } from '@/lib/paykit';
import type { EndpointArgs, EndpointHandler, EndpointPath } from '@paykit-sdk/core';
import { NextResponse, NextRequest } from 'next/server';

export async function POST(
  request: NextRequest,
  { params }: { params: Promise<{ endpoint: string[] }> },
) {
  const { endpoint: endpointArray } = await params;
  const endpoint = ('/' + endpointArray.join('/')) as EndpointPath;
  const handler = endpoints[endpoint] as EndpointHandler<typeof endpoint>;

  if (!handler) {
    return NextResponse.json({ message: 'Endpoint not found' }, { status: 404 });
  }

  const body = await request.json();
  const { args } = body as { args: EndpointArgs<typeof endpoint> };
  try {
    const result = await handler(...args);
    return NextResponse.json({ result });
  } catch (error) {
    return NextResponse.json(
      { message: error instanceof Error ? error.message : 'Internal server error' },
      { status: 500 },
    );
  }
}
```

## Webhook Setup

<br />

Webhook route. This validates and dispatches events.

<br />

```typescript
// app/api/paykit/webhook/route.ts
import { paykit } from '@/lib/paykit';
import type { NextRequest } from 'next/server';
import { NextResponse } from 'next/server';

export async function POST(request: NextRequest) {
  // Use your PayPal webhook ID
  const webhookSecret = process.env.PAYPAL_WEBHOOK_ID;

  if (!webhookSecret) {
    return NextResponse.json({ error: 'Webhook secret not configured' }, { status: 500 });
  }

  const webhook = paykit.webhooks
    .setup({ webhookSecret })
    .on('customer.created', async event => {})
    .on('subscription.created', async event => {})
    .on('payment.created', async event => {})
    .on('refund.created', async event => {})
    .on('invoice.generated', async event => {});

  const body = await request.text();
  const headers = request.headers;
  const url = request.url;

  await webhook.handle({ body, headers, fullUrl: url });

  return NextResponse.json({ success: true });
}
```

## Environment Variables

<br />

```bash
# .env
PAYPAL_CLIENT_ID=...
PAYPAL_CLIENT_SECRET=...
PAYPAL_SANDBOX=true
PAYPAL_WEBHOOK_ID=...
```

## Example checkout

<br />

```typescript
const checkout = await paykit.checkouts.create({
  customer_id: 'cus_123',
  item_id: 'price_123',
  session_type: 'one_time',
  quantity: 1,
  metadata: { plan: 'pro' },
  success_url: 'http://localhost:3000/success',
  cancel_url: 'http://localhost:3000/cancel',
});
```

## Support

- PayPal Docs: https://developer.paypal.com/docs/
- PayKit Issues: https://github.com/usepaykit/paykit-sdk/issues
